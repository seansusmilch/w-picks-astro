---
import Matchup from '@/components/Matchup/Matchup.astro';
import { PaginateControls } from './PaginateControls';

interface Props {
  page: number;
}

const { page } = Astro.props;

const pb = Astro.locals.pb;

const matchups = await pb
  .collection('matchups')
  .getList(page, 5, { sort: '+time_utc' });

console.log('Rendering matchups list');
---

<h1 class='text-4xl font-bold'>Matchups</h1>
<div class='flex flex-col gap-2 max-w-md'>
  {
    matchups.items.map((matchup) => (
      <a href={`/matchups/${matchup.id}`}>
        <Matchup matchup={matchup} />
      </a>
    ))
  }
</div>
<div class='flex flex-row justify-between gap-2 max-w-md py-4'>
  <PaginateControls page={matchups.page} totalPages={matchups.totalPages} />
</div>
