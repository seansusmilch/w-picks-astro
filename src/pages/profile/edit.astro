---
import Layout from '@/layouts/Layout.astro';
import { AvatarSection } from '@/components/Profile/Edit/AvatarSection';
import { getUserAvatarUrl } from '@/lib/data_common';
import { UsernameBioSection } from '@/components/Profile/Edit/UsernameBioSection';
import { Button } from '@/components/ui/button';
import { ArrowLeftIcon } from '@heroicons/react/24/outline';

const { user } = Astro.locals;
user.record.avatar_url = getUserAvatarUrl(user.record.id, user.record.avatar);
---

<Layout title='Edit Profile'>
  <div class='flex flex-col items-center gap-4'>
    <a href='/profile'>
      <Button client:load>
        <ArrowLeftIcon className='h-5 w-5' />Back to profile
      </Button>
    </a>
    <div
      class='flex flex-col w-full max-w-md lg:max-w-xl border rounded-lg shadow-lg p-4 gap-4'
    >
      <AvatarSection user={user} client:load />
    </div>

    <div
      class='flex flex-col w-full max-w-md lg:max-w-xl border rounded-lg shadow-lg p-4 gap-4'
    >
      <UsernameBioSection user={user} client:load />
    </div>
  </div>
</Layout>
